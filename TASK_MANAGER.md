# –£–º–Ω—ã–π –¢–∞—Å–∫-–º–µ–Ω–µ–¥–∂–µ—Ä

## –û–ø–∏—Å–∞–Ω–∏–µ

–ë–æ—Ç –ø–µ—Ä–µ–¥–µ–ª–∞–Ω –≤ —É–º–Ω—ã–π —Ç–∞—Å–∫-–º–µ–Ω–µ–¥–∂–µ—Ä —Å AI-–ø–∞—Ä—Å–∏–Ω–≥–æ–º –∑–∞–¥–∞—á –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ü§ñ AI-–ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–¥–∞—á
- –ü–æ–Ω–∏–º–∞–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—É—Ç—å –∑–∞–¥–∞—á–∏ –∏–∑ –ª—é–±–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –¥–∞—Ç—ã –∏ –≤—Ä–µ–º—è (–∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ)
- –ü—Ä–∏–º–µ—Ä—ã:
  - "–ù–∞–ø–æ–º–Ω–∏ –∫—É–ø–∏—Ç—å —Ö–ª–µ–±–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 9 —É—Ç—Ä–∞" ‚Üí –ó–∞–¥–∞—á–∞ —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º
  - "–ß–µ—Ä–µ–∑ 2 —á–∞—Å–∞ –ø–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ" ‚Üí –ó–∞–¥–∞—á–∞ —Å —Ä–∞—Å—á—ë—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏
  - "–°—Ö–æ–¥–∏—Ç—å –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª" ‚Üí –ó–∞–¥–∞—á–∞ –≤ –±—ç–∫–ª–æ–≥ (–±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏)

### ‚è∞ –£–º–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
- –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞ –∑–∞–¥–∞—á (8:00 —É—Ç—Ä–∞ UTC+3)
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ UTC+3 (–ú–æ—Å–∫–≤–∞)

### üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏
- `/start` ‚Äî –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `/mytasks` ‚Äî –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞–¥–∞—á
- –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```python
class Task:
    id: int                      # –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
    user_id: BigInteger          # Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    text: String                 # –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
    scheduled_time: DateTime     # –í—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (nullable)
    is_completed: Boolean        # –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```

### AI-—Å–µ—Ä–≤–∏—Å (ai/service.py)
- –ú–µ—Ç–æ–¥ `parse_task_message()` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–¥–∞—á
- –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –≤–∫–ª—é—á–∞–µ—Ç —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É/–≤—Ä–µ–º—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞—Ç
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–≥–∏–π JSON: `{"task": "...", "datetime": "YYYY-MM-DD HH:MM:SS"}`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `json_repair` –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –û—á–∏—â–∞–µ—Ç markdown-–±–ª–æ–∫–∏ –∏–∑ –æ—Ç–≤–µ—Ç–∞ AI

### –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (scheduler.py)
- `AsyncIOScheduler` —Å —Ç–∞–π–º–∑–æ–Ω–æ–π Europe/Moscow
- `send_reminder()` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `daily_digest()` ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞ –≤ 8:00
- `add_task_reminder()` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (handlers/main.py)
1. –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü–∞—Ä—Å–∏–º —á–µ—Ä–µ–∑ AI ‚Üí –ø–æ–ª—É—á–∞–µ–º –∑–∞–¥–∞—á—É –∏ –¥–∞—Ç—É
3. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î
4. –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∞—Ç–∞ ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º –≤ scheduler ‚Üí "–ü–æ—Å—Ç–∞–≤–∏–ª –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ"
5. –ï—Å–ª–∏ –Ω–µ—Ç –¥–∞—Ç—ã ‚Üí "–ó–∞–ø–∏—Å–∞–ª –≤ –±—ç–∫–ª–æ–≥"

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (bot.py)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–¥–∞—á –∏–∑ –ë–î –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```
apscheduler==3.10.4    # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
json-repair==0.30.2    # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ JSON –æ—Ç AI
```

### –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ UTC+3 (Europe/Moscow)
- AI –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ "–∑–∞–≤—Ç—Ä–∞", "—á–µ—Ä–µ–∑ —á–∞—Å" –∏ —Ç.–¥.
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–∞–π–º–∑–æ–Ω–µ Europe/Moscow

### –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç: `"YYYY-MM-DD HH:MM:SS"`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç: `"–î–î.–ú–ú.–ì–ì–ì–ì –≤ –ß–ß:–ú–ú"`

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ù–∞–ø–æ–º–Ω–∏ –∫—É–ø–∏—Ç—å —Ö–ª–µ–±–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 9 —É—Ç—Ä–∞"
–ë–æ—Ç: "‚úÖ –ü–æ—Å—Ç–∞–≤–∏–ª –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–∞ 30.12.2025 –≤ 09:00
      üìù –ó–∞–¥–∞—á–∞: –ö—É–ø–∏—Ç—å —Ö–ª–µ–±–∞"
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ –±—ç–∫–ª–æ–≥
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ"
–ë–æ—Ç: "‚úÖ –ó–∞–ø–∏—Å–∞–ª –≤ —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
      üìù –ó–∞–¥–∞—á–∞: –ü–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ
      üí° –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ, —Å–∫–∞–∂–∏ –∫–æ–≥–¥–∞!"
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /mytasks
–ë–æ—Ç: "üìã –¢–≤–æ–∏ –∑–∞–¥–∞—á–∏:
     
     ‚è∞ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ:
     ‚Ä¢ 30.12.2025 09:00 ‚Äî –ö—É–ø–∏—Ç—å —Ö–ª–µ–±–∞
     
     üìù –ë—ç–∫–ª–æ–≥:
     ‚Ä¢ –ü–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ"
```

### –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
```
[–í 09:00 30.12.2025]
–ë–æ—Ç: "‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ!
      
      –ö—É–ø–∏—Ç—å —Ö–ª–µ–±–∞"
```

### –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞
```
[–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 08:00]
–ë–æ—Ç: "üìã –ü–ª–∞–Ω –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:
      
      ‚Ä¢ 09:00 ‚Äî –ö—É–ø–∏—Ç—å —Ö–ª–µ–±–∞
      ‚Ä¢ 15:00 ‚Äî –í—Å—Ç—Ä–µ—á–∞ —Å –¥—Ä—É–∑—å—è–º–∏"
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- AI API –∫–ª—é—á –±–µ—Ä—ë—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (`AI_API_KEY`)
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —á–∏—Ç–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `.env` –Ω–∞–ø—Ä—è–º—É—é
- –ò—Å–ø–æ–ª—å–∑—É–µ–º `os.getenv()` –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤

## –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏:
1. –°—Ç–∞—Ä–∞—è –±–∞–∑–∞ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞ (–∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞)
2. –°–æ–∑–¥–∞—Å—Ç—Å—è –Ω–æ–≤–∞—è —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ `users` –∏ `tasks`
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–Ω–æ–≤–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á–∏

## –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∑–∞–¥–∞—á–∏ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ, –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–¥–∞—á
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞ N –º–∏–Ω—É—Ç –¥–æ —Å–æ–±—ã—Ç–∏—è
- –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–¥–∞—á –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å
